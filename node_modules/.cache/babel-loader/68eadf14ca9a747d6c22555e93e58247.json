{"ast":null,"code":"var _jsxFileName = \"/home/jonathan/Documentos/cefet-web-tp/client/src/componentes/World/character/character.js\";\nimport React, { Component } from \"react\";\nimport './character.css';\n\nclass Character extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleKey = e => {\n      switch (e.keyCode) {\n        case 39:\n          this.state.mvRight = true;\n          this.state.mvLeft = false;\n          this.state.mvUp = false;\n          this.state.mvDown = false;\n          break;\n\n        case 37:\n          this.state.mvRight = false;\n          this.state.mvLeft = true;\n          this.state.mvUp = false;\n          this.state.mvDown = false;\n          break;\n\n        /* case 38:\n             this.state.mvRight = false;\n             this.state.mvLeft = false;\n             this.state.mvUp = true;\n             this.state.mvDown = false;\n             break;\n         case 40:\n             this.state.mvRight = false;\n             this.state.mvLeft = false;\n             this.state.mvUp = false;\n             this.state.mvDown = true;\n             break;*/\n      }\n\n      const mvRight = this.state.mvRight;\n      const mvLeft = this.state.mvLeft;\n      const mvUp = this.state.mvUp;\n      const mvDown = this.state.mvDown;\n      this.setState({\n        mvRight,\n        mvLeft,\n        mvUp,\n        mvDown\n      });\n    };\n\n    this.handleKeyUp = e => {\n      switch (e.keyCode) {\n        case 39:\n          this.state.mvRight = false;\n          break;\n\n        case 37:\n          this.state.mvLeft = false;\n          break;\n\n        /*case 38:\n            this.state.mvUp = false;\n            break;\n        case 40:\n            this.state.mvDown = false;\n            break;*/\n      }\n\n      const mvRight = this.state.mvRight;\n      const mvLeft = this.state.mvLeft;\n      const mvUp = this.state.mvUp;\n      const mvDown = this.state.mvDown;\n      this.setState({\n        mvRight,\n        mvLeft,\n        mvUp,\n        mvDown\n      });\n    };\n\n    this.state = {\n      rotation: 0,\n      widthFrame: 24,\n      heightFrame: 32,\n      speed: 1,\n      srcX: 0,\n      srcY: 0,\n      posX: 0,\n      posY: 0,\n      mvRight: false,\n      mvLeft: false,\n      mvUp: false,\n      mvDown: false,\n      countAnim: 0\n    };\n    this.tick = this.tick.bind(this);\n    this.paint = this.paint.bind(this);\n    this.move = this.move.bind(this); // this.handleKeyPress = this.handleKeyPress.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKey);\n    document.addEventListener(\"keyup\", this.handleKeyUp); //requestAnimationFrame(this.tick);\n\n    this.tick();\n  }\n\n  componentWillUnmount() {// document.removeEventListener('keydown', handleKeyPress);\n  }\n\n  componentDidUpdate() {\n    this.paint();\n    this.move();\n  }\n\n  paint() {\n    const context = this.refs.canvas.getContext(\"2d\");\n    var image = new Image();\n    image.src = \"https://i.imgur.com/abkQcYt.png\";\n    let width = window.screen.width;\n    context.clearRect(0, 0, width, 500);\n    context.save();\n    context.drawImage(image, //Imagem de origem\n    //Captura da imagem\n    this.state.srcX, //Origem da captura no eixo X\n    this.state.srcY, //Origem da captura no eixo Y\n    this.state.widthFrame, //Largura da imagem que será capturada\n    this.state.heightFrame, //Altura da imagem que será capturada\n    //Exibição da imagem\n    this.state.posX, //Posição no eixo X onde a imagem será exibida \n    this.state.posY, //Posição no eixo Y onde a imagem será exibida \n    this.state.widthFrame, //Largura da imagem a ser exibida \n    this.state.heightFrame //Altura da imagem a ser exibida \n    );\n    context.restore();\n  }\n\n  move() {\n    if (0.7895 * window.screen.width > this.state.posX && this.state.mvRight) {\n      this.state.posX = this.state.posX + 2;\n      this.state.srcY = this.state.heightFrame * 3;\n    } else if (0 < this.state.posX && this.state.mvLeft) {\n      this.state.posX = this.state.posX - 2;\n      this.state.srcY = this.state.heightFrame * 2;\n    }\n    /*else if (this.state.mvUp) {\n        this.state.posY = this.state.posY - 2;\n        this.state.srcY = this.state.heightFrame * 1;\n    }\n    else if (this.state.mvDown) {\n        this.state.posY = this.state.posY + 2;\n        this.state.srcY = this.state.heightFrame * 0;\n    }*/\n\n  }\n\n  tick() {\n    if (this.state.mvLeft || this.state.mvUp || this.state.mvRight || this.state.mvDown) {\n      //Caso qualquer seta seja pressionada, o contador de animação é incrementado\n      this.state.countAnim = this.state.countAnim + 1;\n\n      if (this.state.countAnim >= 40) {\n        this.state.countAnim = 0;\n      }\n\n      this.state.srcX = Math.floor(this.state.countAnim / 5) * this.state.widthFrame;\n    } else {\n      //Caso nenhuma tecla seja pressionada, o contador de animação é zerado e a imagem do personagem parado é exibida\n      this.state.srcX = 0;\n      this.state.countAnim = 0;\n    }\n\n    const countAnim = this.state.countAnim;\n    const posX = this.state.posX;\n    const srcX = this.state.srcX;\n    this.setState({\n      posX,\n      countAnim,\n      srcX\n    });\n    requestAnimationFrame(this.tick);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"div-style\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      className: \"no-margin-and-padding full-height canvas\",\n      ref: \"canvas\",\n      width: window.screen.width,\n      height: \"80px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Character;","map":{"version":3,"sources":["/home/jonathan/Documentos/cefet-web-tp/client/src/componentes/World/character/character.js"],"names":["React","Component","Character","constructor","props","handleKey","e","keyCode","state","mvRight","mvLeft","mvUp","mvDown","setState","handleKeyUp","rotation","widthFrame","heightFrame","speed","srcX","srcY","posX","posY","countAnim","tick","bind","paint","move","componentDidMount","document","addEventListener","componentWillUnmount","componentDidUpdate","context","refs","canvas","getContext","image","Image","src","width","window","screen","clearRect","save","drawImage","restore","Math","floor","requestAnimationFrame","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './character.css';\n\nclass Character extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            rotation: 0, widthFrame: 24, heightFrame: 32, speed: 1, srcX: 0, srcY: 0, posX: 0, posY: 0,\n            mvRight: false, mvLeft: false, mvUp: false, mvDown: false, countAnim: 0\n        };\n        this.tick = this.tick.bind(this);\n        this.paint = this.paint.bind(this);\n        this.move = this.move.bind(this);\n        // this.handleKeyPress = this.handleKeyPress.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.handleKey);\n        document.addEventListener(\"keyup\", this.handleKeyUp);\n        //requestAnimationFrame(this.tick);\n        this.tick();\n    }\n    componentWillUnmount() {\n        // document.removeEventListener('keydown', handleKeyPress);\n    }\n    componentDidUpdate() {\n        this.paint();\n        this.move();\n    }\n\n    paint() {\n\n        const context = this.refs.canvas.getContext(\"2d\");\n        var image = new Image();\n        image.src = \"https://i.imgur.com/abkQcYt.png\";\n        let width = window.screen.width;\n        context.clearRect(0, 0, width, 500);\n        context.save();\n\n        context.drawImage(image, //Imagem de origem\n            //Captura da imagem\n            this.state.srcX, //Origem da captura no eixo X\n            this.state.srcY, //Origem da captura no eixo Y\n            this.state.widthFrame, //Largura da imagem que será capturada\n            this.state.heightFrame, //Altura da imagem que será capturada\n            //Exibição da imagem\n            this.state.posX, //Posição no eixo X onde a imagem será exibida \n            this.state.posY, //Posição no eixo Y onde a imagem será exibida \n            this.state.widthFrame, //Largura da imagem a ser exibida \n            this.state.heightFrame //Altura da imagem a ser exibida \n        );\n        context.restore();\n\n    }\n\n    move() {\n        if (( (0.7895*window.screen.width) > this.state.posX && this.state.mvRight)) {\n            this.state.posX = this.state.posX + 2;\n            this.state.srcY = this.state.heightFrame * 3;\n        }\n        else if ((0 < this.state.posX && this.state.mvLeft)) {\n            this.state.posX = this.state.posX - 2;\n            this.state.srcY = this.state.heightFrame * 2;\n        }\n        /*else if (this.state.mvUp) {\n            this.state.posY = this.state.posY - 2;\n            this.state.srcY = this.state.heightFrame * 1;\n        }\n        else if (this.state.mvDown) {\n            this.state.posY = this.state.posY + 2;\n            this.state.srcY = this.state.heightFrame * 0;\n        }*/\n\n    };\n\n    handleKey = e => {\n        switch (e.keyCode) {\n            case 39:\n                this.state.mvRight = true;\n                this.state.mvLeft = false;\n                this.state.mvUp = false;\n                this.state.mvDown = false;\n                break;\n            case 37:\n                this.state.mvRight = false;\n                this.state.mvLeft = true;\n                this.state.mvUp = false;\n                this.state.mvDown = false;\n                break;\n            /* case 38:\n                 this.state.mvRight = false;\n                 this.state.mvLeft = false;\n                 this.state.mvUp = true;\n                 this.state.mvDown = false;\n                 break;\n             case 40:\n                 this.state.mvRight = false;\n                 this.state.mvLeft = false;\n                 this.state.mvUp = false;\n                 this.state.mvDown = true;\n                 break;*/\n        }\n        const mvRight = this.state.mvRight;\n        const mvLeft = this.state.mvLeft;\n        const mvUp = this.state.mvUp;\n        const mvDown = this.state.mvDown;\n        this.setState({ mvRight, mvLeft, mvUp, mvDown });\n\n\n    }\n\n    handleKeyUp = e => {\n\n        switch (e.keyCode) {\n            case 39:\n                this.state.mvRight = false;\n                break;\n            case 37:\n                this.state.mvLeft = false;\n                break;\n            /*case 38:\n                this.state.mvUp = false;\n                break;\n            case 40:\n                this.state.mvDown = false;\n                break;*/\n        }\n\n        const mvRight = this.state.mvRight;\n        const mvLeft = this.state.mvLeft;\n        const mvUp = this.state.mvUp;\n        const mvDown = this.state.mvDown;\n        this.setState({ mvRight, mvLeft, mvUp, mvDown });\n    }\n\n    tick() {\n        if (this.state.mvLeft || this.state.mvUp || this.state.mvRight || this.state.mvDown) {\n            //Caso qualquer seta seja pressionada, o contador de animação é incrementado\n            this.state.countAnim = this.state.countAnim + 1;\n            if (this.state.countAnim >= 40) {\n                this.state.countAnim = 0;\n            }\n            this.state.srcX = Math.floor(this.state.countAnim / 5) * this.state.widthFrame;\n        }\n        else {\n            //Caso nenhuma tecla seja pressionada, o contador de animação é zerado e a imagem do personagem parado é exibida\n            this.state.srcX = 0;\n            this.state.countAnim = 0;\n        }\n\n\n        const countAnim = this.state.countAnim;\n        const posX = this.state.posX;\n        const srcX = this.state.srcX;\n        this.setState({ posX, countAnim, srcX });\n\n        requestAnimationFrame(this.tick);\n    }\n\n    render() {\n        return (\n            <div className='div-style' >\n                <canvas className='no-margin-and-padding full-height canvas'\n                    ref=\"canvas\"\n                    width={window.screen.width}\n                    height=\"80px\"\n                />\n            </div>\n        )\n    }\n}\n\nexport default Character"]},"metadata":{},"sourceType":"module"}